<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<PropertyGroup>
		<LocalDllDir Condition="'$(LocalDllDir)' == ''">C:\GitHub\_dlls</LocalDllDir>

		<FatebladeReferencePath Condition="'$(FatebladeReferencePath)' == ''">$(LocalDllDir)</FatebladeReferencePath>
		<ReferencePath Condition="'$(FatebladeReferencePath)' != ''">$(FatebladeReferencePath);$(ReferencePath)</ReferencePath>
	</PropertyGroup>

	<!-- 
    <Target Name="BeforeResolveReferences">
        <CreateProperty Value="$(LocalDllDir);$(AssemblySearchPaths)">
            <Output TaskParameter="Value" PropertyName="AssemblySearchPaths" />
        </CreateProperty>
    </Target> -->

	<Target Name="AddReferencePathToAssemblySearchPaths" BeforeTargets="ResolveAssemblyReferences">
		<PropertyGroup>
			<AssemblySearchPaths>
				$(AssemblySearchPaths);
				$(ReferencePath);
				$(TargetDir);
			</AssemblySearchPaths>
		</PropertyGroup>
	</Target>

	<Target Name="CopyProjectToDll">
		<ItemGroup>
			<OutputFilesToCopy Include="@(BuiltProjectOutputGroupOutput);@(DebugSymbolsProjectOutputGroupOutput);@(DocumentationProjectOutputGroupOutput)" />
		</ItemGroup>

		<Copy SourceFiles="@(OutputFilesToCopy)" DestinationFolder="$(LocalDllDir)" />
	</Target>
</Project>